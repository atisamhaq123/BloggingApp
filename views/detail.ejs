<%- include('./shared/header.ejs') %>

<div class="container my-5">
  <div class="card border-0 shadow-lg rounded-4 overflow-hidden bg-light bg-opacity-75" 
       style="backdrop-filter: blur(12px);">
    
    <!-- Header Section -->
    <div class="card-header text-white d-flex justify-content-between align-items-center px-4 py-3" 
         style="background: linear-gradient(135deg, #6f42c1, #0d6efd);">
      <h2 class="mb-0 fw-bold"><%= blog.title %></h2>
      <% if (admin) { %>
        <button onclick="Delete(this)" 
              data-id ="<%= blog._id %>" 
              class="btn btn-sm btn-outline-light">
        <i class="bi bi-trash"></i> Delete
      </button>
      <% } %>
     
    </div>

    <!-- Optional Image -->
      <img src="https://blog.lulu.com/content/images/2024/12/print-book-beginners.jpg" class="card-img-top" alt="<%= blog.title %>">

    <!-- Body Section -->
    <div class="card-body px-4 py-5">
      <p class="text-muted mb-3">
        <i class="bi bi-calendar-event"></i> 
        Published on: <%= new Date(blog.createdAt).toLocaleDateString() %>
      </p>
      <p class="text-muted mb-3">
        <i class="bi bi-calendar-event"></i> 
        Published by: <%= blog.writer %>
      </p>
      <p class="lead">
        <strong>Description:</strong> 
          <%= blog.description %>
      </p>
      <p class="fs-5">
        <strong>Details:</strong> <%= blog.detail %>
      </p>
    </div>
  </div>
</div>

<script>
    function Delete(btn){
        const endPoint = `/blogs/${btn.dataset.id}`;
        fetch(endPoint, {method: "DELETE"})
        .then((res) => res.json())
        .then((data) => {
            window.location.href = data.result; // redirect to blogs list
        })
        .catch((error)=>{
             console.log(error);
        })
    }
</script>
